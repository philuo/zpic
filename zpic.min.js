const Module={};let readyPromiseResolve,readyPromiseReject;const promise=new Promise(((e,r)=>{readyPromiseResolve=e,readyPromiseReject=r}));let wasmMemory,wasmTable,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,InternalError,UnboundTypeError,BindingError,embind_charCodes;const out=console.log.bind(console),err=console.warn.bind(console),quit_=(e,r)=>{throw r},__ATINIT__=[],structRegistrations={},awaitingDependencies={},registeredTypes={},typeDependencies={},emval_newers={},emval_symbols={},char_0=48,char_9=57,UTF8Decoder=new TextDecoder("utf8"),UTF16Decoder=new TextDecoder("utf-16le"),asmLibraryArg={B:___cxa_thread_atexit,l:__embind_finalize_value_object,p:__embind_register_bigint,y:__embind_register_bool,x:__embind_register_emval,i:__embind_register_float,f:__embind_register_function,c:__embind_register_integer,b:__embind_register_memory_view,j:__embind_register_std_string,e:__embind_register_std_wstring,m:__embind_register_value_object,a:__embind_register_value_object_field,z:__embind_register_void,g:__emval_decref,u:__emval_get_global,k:__emval_incref,n:__emval_new,h:_abort,r:_emscripten_memcpy_big,d:_emscripten_resize_heap,s:_environ_get,t:_environ_sizes_get,A:_exit,w:_fd_close,o:_fd_seek,v:_fd_write,q:_setTempRet0},SYSCALLS={mappings:{},buffers:[null,[],[]],printChar(e,r){var n=SYSCALLS.buffers[e];0===r||10===r?((1===e?out:err)(UTF8ArrayToString(n,0)),n.length=0):n.push(r)},varargs:void 0,get:()=>(SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]),getStr:e=>UTF8ToString(e),get64:(e,r)=>e},emval_free_list=[],emval_handle_array=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function UTF8ArrayToString(e,r,n){for(var t=r+n,i=r;e[i]&&!(i>=t);)++i;return UTF8Decoder.decode(e.subarray?e.subarray(r,i):new Uint8Array(e.slice(r,i)))}function UTF8ToString(e,r){if(!e)return"";for(var n=e+r,t=e;!(t>=n)&&HEAPU8[t];)++t;return UTF8Decoder.decode(HEAPU8.subarray(e,t))}function stringToUTF8Array(e,r,n,t){if(!(t>0))return 0;for(var i=n,o=n+t-1,a=0;a<e.length;++a){var u=e.charCodeAt(a);if(u>=55296&&u<=57343)u=65536+((1023&u)<<10)|1023&e.charCodeAt(++a);if(u<=127){if(n>=o)break;r[n++]=u}else if(u<=2047){if(n+1>=o)break;r[n++]=192|u>>6,r[n++]=128|63&u}else if(u<=65535){if(n+2>=o)break;r[n++]=224|u>>12,r[n++]=128|u>>6&63,r[n++]=128|63&u}else{if(n+3>=o)break;r[n++]=240|u>>18,r[n++]=128|u>>12&63,r[n++]=128|u>>6&63,r[n++]=128|63&u}}return r[n]=0,n-i}function stringToUTF8(e,r,n){return stringToUTF8Array(e,HEAPU8,r,n)}function lengthBytesUTF8(e){for(var r=0,n=0;n<e.length;++n){var t=e.charCodeAt(n);t>=55296&&t<=57343&&(t=65536+((1023&t)<<10)|1023&e.charCodeAt(++n)),t<=127?++r:r+=t<=2047?2:t<=65535?3:4}return r}function UTF16ToString(e,r){let n=e,t=n>>1;const i=t+r/2;for(;!(t>=i)&&HEAPU16[t];)++t;return n=t<<1,UTF16Decoder.decode(HEAPU8.subarray(e,n))}function stringToUTF16(e,r,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var t=r,i=(n-=2)<2*e.length?n/2:e.length,o=0;o<i;++o){var a=e.charCodeAt(o);HEAP16[r>>1]=a,r+=2}return HEAP16[r>>1]=0,r-t}function lengthBytesUTF16(e){return 2*e.length}function UTF32ToString(e,r){for(var n=0,t="";!(n>=r/4);){var i=HEAP32[e+4*n>>2];if(0==i)break;if(++n,i>=65536){var o=i-65536;t+=String.fromCharCode(55296|o>>10,56320|1023&o)}else t+=String.fromCharCode(i)}return t}function stringToUTF32(e,r,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var t=r,i=t+n-4,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343)a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o);if(HEAP32[r>>2]=a,(r+=4)+4>i)break}return HEAP32[r>>2]=0,r-t}function lengthBytesUTF32(e){for(var r=0,n=0;n<e.length;++n){var t=e.charCodeAt(n);t>=55296&&t<=57343&&++n,r+=4}return r}function writeAsciiToMemory(e,r,n){for(var t=0;t<e.length;++t)HEAP8[r++>>0]=e.charCodeAt(t);n||(HEAP8[r>>0]=0)}function alignUp(e,r){return e%r>0&&(e+=r-e%r),e}function updateGlobalBufferAndViews(e){buffer=e,Module.HEAP8=HEAP8=new Int8Array(e),Module.HEAP16=HEAP16=new Int16Array(e),Module.HEAP32=HEAP32=new Int32Array(e),Module.HEAPU8=HEAPU8=new Uint8Array(e),Module.HEAPU16=HEAPU16=new Uint16Array(e),Module.HEAPU32=HEAPU32=new Uint32Array(e),Module.HEAPF32=HEAPF32=new Float32Array(e),Module.HEAPF64=HEAPF64=new Float64Array(e)}function initRuntime(){callRuntimeCallbacks(__ATINIT__)}function addOnInit(e){__ATINIT__.unshift(e)}function abort(e){err(e+=""),readyPromiseReject(new WebAssembly.RuntimeError(e))}function callRuntimeCallbacks(e){for(;e.length>0;){let r=e.shift();if("function"==typeof r){r(Module);continue}let n=r.func;"number"==typeof n?void 0===r.arg?wasmTable.get(n)():wasmTable.get(n)(r.arg):n(void 0===r.arg?null:r.arg)}}function _atexit(e,r){}function ___cxa_thread_atexit(e,r){return _atexit(e,r)}function runDestructors(e){for(;e.length;){var r=e.pop();e.pop()(r)}}function simpleReadValueFromPointer(e){return this.fromWireType(HEAPU32[e>>2])}function makeLegalFunctionName(e){if(void 0===e)return"_unknown";var r=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return r>=48&&r<=57?"_"+e:e}function createNamedFunction(e,r){return e=makeLegalFunctionName(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(r)}function extendError(e,r){var n=createNamedFunction(r,(function(e){this.name=r,this.message=e;var n=new Error(e).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}function throwInternalError(e){throw new InternalError(e)}function whenDependentTypesAreResolved(e,r,n){function t(r){var t=n(r);t.length!==e.length&&throwInternalError("Mismatched type converter count");for(var i=0;i<e.length;++i)registerType(e[i],t[i])}e.forEach((function(e){typeDependencies[e]=r}));var i=new Array(r.length),o=[],a=0;r.forEach((function(e,r){registeredTypes.hasOwnProperty(e)?i[r]=registeredTypes[e]:(o.push(e),awaitingDependencies.hasOwnProperty(e)||(awaitingDependencies[e]=[]),awaitingDependencies[e].push((function(){i[r]=registeredTypes[e],++a===o.length&&t(i)})))})),0===o.length&&t(i)}function __embind_finalize_value_object(e){var r=structRegistrations[e];delete structRegistrations[e];var n=r.rawConstructor,t=r.rawDestructor,i=r.fields;whenDependentTypesAreResolved([e],i.map((function(e){return e.getterReturnType})).concat(i.map((function(e){return e.setterArgumentType}))),(function(e){var o={};return i.forEach((function(r,n){var t=r.fieldName,a=e[n],u=r.getter,s=r.getterContext,l=e[n+i.length],c=r.setter,d=r.setterContext;o[t]={read:function(e){return a.fromWireType(u(s,e))},write:function(e,r){var n=[];c(d,e,l.toWireType(n,r)),runDestructors(n)}}})),[{name:r.name,fromWireType:function(e){var r={};for(var n in o)r[n]=o[n].read(e);return t(e),r},toWireType:function(e,r){for(var i in o)if(!(i in r))throw new TypeError('Missing field:  "'+i+'"');var a=n();for(i in o)o[i].write(a,r[i]);return null!==e&&e.push(t,a),a},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:t}]}))}function __embind_register_bigint(e,r,n,t,i){}function getShiftFromSize(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function embind_init_charCodes(){const e=new Array(256);for(let r=0;r<256;++r)e[r]=String.fromCharCode(r);embind_charCodes=e}function readLatin1String(e){for(var r="",n=e;HEAPU8[n];)r+=embind_charCodes[HEAPU8[n++]];return r}function throwBindingError(e){throw new BindingError(e)}function registerType(e,r,n){if(n=n||{},!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");var t=r.name;if(e||throwBindingError('type "'+t+'" must have a positive integer typeid pointer'),registeredTypes.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;throwBindingError("Cannot register type '"+t+"' twice")}if(registeredTypes[e]=r,delete typeDependencies[e],awaitingDependencies.hasOwnProperty(e)){var i=awaitingDependencies[e];delete awaitingDependencies[e],i.forEach((function(e){e()}))}}function __embind_register_bool(e,r,n,t,i){var o=getShiftFromSize(n);registerType(e,{name:r=readLatin1String(r),fromWireType:function(e){return!!e},toWireType:function(e,r){return r?t:i},argPackAdvance:8,readValueFromPointer:function(e){var t;if(1===n)t=HEAP8;else if(2===n)t=HEAP16;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+r);t=HEAP32}return this.fromWireType(t[e>>o])},destructorFunction:null})}function __emval_decref(e){e>4&&0==--emval_handle_array[e].refcount&&(emval_handle_array[e]=void 0,emval_free_list.push(e))}function count_emval_handles(){for(var e=0,r=5;r<emval_handle_array.length;++r)void 0!==emval_handle_array[r]&&++e;return e}function get_first_emval(){for(var e=5;e<emval_handle_array.length;++e)if(void 0!==emval_handle_array[e])return emval_handle_array[e];return null}function init_emval(){Module.count_emval_handles=count_emval_handles,Module.get_first_emval=get_first_emval}function __emval_register(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{const r=emval_free_list.length?emval_free_list.pop():emval_handle_array.length;return emval_handle_array[r]={refcount:1,value:e},r}}}function __embind_register_emval(e,r){registerType(e,{name:r=readLatin1String(r),fromWireType:function(e){var r=emval_handle_array[e].value;return __emval_decref(e),r},toWireType:function(e,r){return __emval_register(r)},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:null})}function _embind_repr(e){if(null===e)return"null";var r=typeof e;return"object"===r||"array"===r||"function"===r?e.toString():""+e}function floatReadValueFromPointer(e,r){switch(r){case 2:return function(e){return this.fromWireType(HEAPF32[e>>2])};case 3:return function(e){return this.fromWireType(HEAPF64[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function __embind_register_float(e,r,n){var t=getShiftFromSize(n);registerType(e,{name:r=readLatin1String(r),fromWireType:function(e){return e},toWireType:function(e,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError('Cannot convert "'+_embind_repr(r)+'" to '+this.name);return r},argPackAdvance:8,readValueFromPointer:floatReadValueFromPointer(r,t),destructorFunction:null})}function new_(e,r){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=createNamedFunction(e.name||"unknownFunctionName",(function(){}));n.prototype=e.prototype;var t=new n,i=e.apply(t,r);return i instanceof Object?i:t}function craftInvokerFunction(e,r,n,t,i){var o=r.length;o<2&&throwBindingError("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==r[1]&&null!==n,u=!1,s=1;s<r.length;++s)if(null!==r[s]&&void 0===r[s].destructorFunction){u=!0;break}var l="void"!==r[0].name,c="",d="";for(s=0;s<o-2;++s)c+=(0!==s?", ":"")+"arg"+s,d+=(0!==s?", ":"")+"arg"+s+"Wired";var f="return function "+makeLegalFunctionName(e)+"("+c+") {\nif (arguments.length !== "+(o-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(o-2)+" args!');\n}\n";u&&(f+="var destructors = [];\n");var _=u?"destructors":"null",g=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[throwBindingError,t,i,runDestructors,r[0],r[1]];a&&(f+="var thisWired = classParam.toWireType("+_+", this);\n");for(s=0;s<o-2;++s)f+="var arg"+s+"Wired = argType"+s+".toWireType("+_+", arg"+s+"); // "+r[s+2].name+"\n",g.push("argType"+s),m.push(r[s+2]);if(a&&(d="thisWired"+(d.length>0?", ":"")+d),f+=(l?"var rv = ":"")+"invoker(fn"+(d.length>0?", ":"")+d+");\n",u)f+="runDestructors(destructors);\n";else for(s=a?1:2;s<r.length;++s){var p=1===s?"thisWired":"arg"+(s-2)+"Wired";null!==r[s].destructorFunction&&(f+=p+"_dtor("+p+"); // "+r[s].name+"\n",g.push(p+"_dtor"),m.push(r[s].destructorFunction))}return l&&(f+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),f+="}\n",g.push(f),new_(Function,g).apply(null,m)}function ensureOverloadTable(e,r,n){if(void 0===e[r].overloadTable){var t=e[r];e[r]=function(){return e[r].overloadTable.hasOwnProperty(arguments.length)||throwBindingError("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[r].overloadTable+")!"),e[r].overloadTable[arguments.length].apply(this,arguments)},e[r].overloadTable=[],e[r].overloadTable[t.argCount]=t}}function exposePublicSymbol(e,r,n){Module.hasOwnProperty(e)?((void 0===n||void 0!==Module[e].overloadTable&&void 0!==Module[e].overloadTable[n])&&throwBindingError("Cannot register public name '"+e+"' twice"),ensureOverloadTable(Module,e,e),Module.hasOwnProperty(n)&&throwBindingError("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),Module[e].overloadTable[n]=r):(Module[e]=r,void 0!==n&&(Module[e].numArguments=n))}function heap32VectorToArray(e,r){for(var n=[],t=0;t<e;t++)n.push(HEAP32[(r>>2)+t]);return n}function replacePublicSymbol(e,r,n){Module.hasOwnProperty(e)||throwInternalError("Replacing nonexistant public symbol"),void 0!==Module[e].overloadTable&&void 0!==n?Module[e].overloadTable[n]=r:(Module[e]=r,Module[e].argCount=n)}function dynCallLegacy(e,r,n){var t=Module["dynCall_"+e];return n&&n.length?t.apply(null,[r].concat(n)):t.call(null,r)}function dynCall(e,r,n){return e.includes("j")?dynCallLegacy(e,r,n):wasmTable.get(r).apply(null,n)}function getDynCaller(e,r){var n=[];return function(){n.length=arguments.length;for(var t=0;t<arguments.length;t++)n[t]=arguments[t];return dynCall(e,r,n)}}function embind__requireFunction(e,r){var n=(e=readLatin1String(e)).includes("j")?getDynCaller(e,r):wasmTable.get(r);return"function"!=typeof n&&throwBindingError("unknown function pointer with signature "+e+": "+r),n}function getTypeName(e){var r=___getTypeName(e),n=readLatin1String(r);return _free(r),n}function throwUnboundTypeError(e,r){var n=[],t={};throw r.forEach((function e(r){t[r]||registeredTypes[r]||(typeDependencies[r]?typeDependencies[r].forEach(e):(n.push(r),t[r]=!0))})),new UnboundTypeError(e+": "+n.map(getTypeName).join([", "]))}function __embind_register_function(e,r,n,t,i,o){var a=heap32VectorToArray(r,n);e=readLatin1String(e),i=embind__requireFunction(t,i),exposePublicSymbol(e,(function(){throwUnboundTypeError("Cannot call "+e+" due to unbound types",a)}),r-1),whenDependentTypesAreResolved([],a,(function(n){var t=[n[0],null].concat(n.slice(1));return replacePublicSymbol(e,craftInvokerFunction(e,t,null,i,o),r-1),[]}))}function integerReadValueFromPointer(e,r,n){switch(r){case 0:return n?function(e){return HEAP8[e]}:function(e){return HEAPU8[e]};case 1:return n?function(e){return HEAP16[e>>1]}:function(e){return HEAPU16[e>>1]};case 2:return n?function(e){return HEAP32[e>>2]}:function(e){return HEAPU32[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function __embind_register_integer(e,r,n,t,i){r=readLatin1String(r),-1===i&&(i=4294967295);var o=getShiftFromSize(n),a=function(e){return e};if(0===t){var u=32-8*n;a=function(e){return e<<u>>>u}}var s=r.includes("unsigned");registerType(e,{name:r,fromWireType:a,toWireType:function(e,n){if("number"!=typeof n&&"boolean"!=typeof n)throw new TypeError('Cannot convert "'+_embind_repr(n)+'" to '+this.name);if(n<t||n>i)throw new TypeError('Passing a number "'+_embind_repr(n)+'" from JS side to C/C++ side to an argument of type "'+r+'", which is outside the valid range ['+t+", "+i+"]!");return s?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:integerReadValueFromPointer(r,o,0!==t),destructorFunction:null})}function __embind_register_memory_view(e,r,n){var t=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][r];function i(e){var r=HEAPU32,n=r[e>>=2],i=r[e+1];return new t(buffer,i,n)}registerType(e,{name:n=readLatin1String(n),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})}function __embind_register_std_string(e,r){var n="std::string"===(r=readLatin1String(r));registerType(e,{name:r,fromWireType:function(e){var r,t=HEAPU32[e>>2];if(n)for(var i=e+4,o=0;o<=t;++o){var a=e+4+o;if(o==t||0==HEAPU8[a]){var u=UTF8ToString(i,a-i);void 0===r?r=u:(r+=String.fromCharCode(0),r+=u),i=a+1}}else{var s=new Array(t);for(o=0;o<t;++o)s[o]=String.fromCharCode(HEAPU8[e+4+o]);r=s.join("")}return _free(e),r},toWireType:function(e,r){r instanceof ArrayBuffer&&(r=new Uint8Array(r));var t="string"==typeof r;t||r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Int8Array||throwBindingError("Cannot pass non-string to std::string");var i=(n&&t?function(){return lengthBytesUTF8(r)}:function(){return r.length})(),o=_malloc(4+i+1);if(HEAPU32[o>>2]=i,n&&t)stringToUTF8(r,o+4,i+1);else if(t)for(var a=0;a<i;++a){var u=r.charCodeAt(a);u>255&&(_free(o),throwBindingError("String has UTF-16 code units that do not fit in 8 bits")),HEAPU8[o+4+a]=u}else for(a=0;a<i;++a)HEAPU8[o+4+a]=r[a];return null!==e&&e.push(_free,o),o},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function __embind_register_std_wstring(e,r,n){var t,i,o,a,u;n=readLatin1String(n),2===r?(t=UTF16ToString,i=stringToUTF16,a=lengthBytesUTF16,o=function(){return HEAPU16},u=1):4===r&&(t=UTF32ToString,i=stringToUTF32,a=lengthBytesUTF32,o=function(){return HEAPU32},u=2),registerType(e,{name:n,fromWireType:function(e){for(var n,i=HEAPU32[e>>2],a=o(),s=e+4,l=0;l<=i;++l){var c=e+4+l*r;if(l==i||0==a[c>>u]){var d=t(s,c-s);void 0===n?n=d:(n+=String.fromCharCode(0),n+=d),s=c+r}}return _free(e),n},toWireType:function(e,t){"string"!=typeof t&&throwBindingError("Cannot pass non-string to C++ string type "+n);var o=a(t),s=_malloc(4+o+r);return HEAPU32[s>>2]=o>>u,i(t,s+4,o+r),null!==e&&e.push(_free,s),s},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function __embind_register_value_object(e,r,n,t,i,o){structRegistrations[e]={name:readLatin1String(r),rawConstructor:embind__requireFunction(n,t),rawDestructor:embind__requireFunction(i,o),fields:[]}}function __embind_register_value_object_field(e,r,n,t,i,o,a,u,s,l){structRegistrations[e].fields.push({fieldName:readLatin1String(r),getterReturnType:n,getter:embind__requireFunction(t,i),getterContext:o,setterArgumentType:a,setter:embind__requireFunction(u,s),setterContext:l})}function __embind_register_void(e,r){registerType(e,{isVoid:!0,name:r=readLatin1String(r),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,r){}})}function getStringOrSymbol(e){var r=emval_symbols[e];return void 0===r?readLatin1String(e):r}function emval_get_global(){return"object"==typeof globalThis?globalThis:Function("return this")()}function __emval_get_global(e){return 0===e?__emval_register(emval_get_global()):(e=getStringOrSymbol(e),__emval_register(emval_get_global()[e]))}function __emval_incref(e){e>4&&(emval_handle_array[e].refcount+=1)}function requireRegisteredType(e,r){var n=registeredTypes[e];return void 0===n&&throwBindingError(r+" has unknown type "+getTypeName(e)),n}function craftEmvalAllocator(e){for(var r="",n=0;n<e;++n)r+=(0!==n?", ":"")+"arg"+n;var t="return function emval_allocator_"+e+"(constructor, argTypes, args) {\n";for(n=0;n<e;++n)t+="var argType"+n+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+n+'], "parameter '+n+'");\nvar arg'+n+" = argType"+n+".readValueFromPointer(args);\nargs += argType"+n+"['argPackAdvance'];\n";return t+="var obj = new constructor("+r+");\nreturn __emval_register(obj);\n}\n",new Function("requireRegisteredType","Module","__emval_register",t)(requireRegisteredType,Module,__emval_register)}function requireHandle(e){return e||throwBindingError("Cannot use deleted val. handle = "+e),emval_handle_array[e].value}function __emval_new(e,r,n,t){e=requireHandle(e);let i=emval_newers[r];return i||(i=craftEmvalAllocator(r),emval_newers[r]=i),i(e,n,t)}function _abort(){abort()}function _emscripten_memcpy_big(e,r,n){HEAPU8.copyWithin(e,r,r+n)}function emscripten_realloc_buffer(e){try{return wasmMemory.grow(e-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch(e){}}function _emscripten_resize_heap(e){var r=HEAPU8.length,n=2147483648;if((e>>>=0)>n)return!1;for(var t=1;t<=4;t*=2){var i=r*(1+.2/t);if(i=Math.min(i,e+100663296),emscripten_realloc_buffer(Math.min(n,alignUp(Math.max(e,i),65536))))return!0}return!1}function getEnvStrings(){if(!getEnvStrings.strings){const e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:"./this.program"},r=[];for(let n in e)r.push(n+"="+e[n]);getEnvStrings.strings=r}return getEnvStrings.strings}function _environ_get(e,r){let n=0;return getEnvStrings().forEach(((t,i)=>{var o=r+n;HEAP32[e+4*i>>2]=o,writeAsciiToMemory(t,o),n+=t.length+1})),0}function _environ_sizes_get(e,r){const n=getEnvStrings();return HEAP32[e>>2]=n.length,HEAP32[r>>2]=n.reduce(((e,r)=>e+(r.length+1)),0),0}function _exit(e){exit(e)}function _fd_close(e){return 0}function _fd_seek(e,r,n,t,i){}function _fd_write(e,r,n,t){for(var i=0,o=0;o<n;o++){for(var a=HEAP32[r+8*o>>2],u=HEAP32[r+(8*o+4)>>2],s=0;s<u;s++)SYSCALLS.printChar(e,HEAPU8[a+s]);i+=u}return HEAP32[t>>2]=i,0}function _setTempRet0(e){}InternalError=Module.InternalError=extendError(Error,"InternalError"),embind_init_charCodes(),BindingError=Module.BindingError=extendError(Error,"BindingError"),init_emval(),UnboundTypeError=Module.UnboundTypeError=extendError(Error,"UnboundTypeError");let zpicIns,isWorking,deadTimer,_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.E).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.F).apply(null,arguments)},___getTypeName=Module.___getTypeName=function(){return(___getTypeName=Module.___getTypeName=Module.asm.G).apply(null,arguments)};function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function exit(e,r){r&&0===e||quit_(0,new ExitStatus(e))}function createWasm(e){return WebAssembly.instantiate(e,{a:asmLibraryArg}).then((({instance:e})=>{Module.asm=e.exports,wasmMemory=Module.asm.C,updateGlobalBufferAndViews(wasmMemory.buffer),wasmTable=Module.asm.I,addOnInit(Module.asm.D),initRuntime(),readyPromiseResolve(Module)})).catch(readyPromiseReject),promise}function setDeadTimer(e){isWorking=!1,deadTimer=setTimeout((()=>self.postMessage({type:"close"})),e)}function cancelDeadTimer(){clearTimeout(deadTimer),isWorking=!0,deadTimer=null}const workerJobMap={init({buffer:e}){zpicIns||createWasm(e).then((e=>zpicIns=e))},job({data:e,quality:r=75}){const n=Date.now();cancelDeadTimer(),compress(e.data,e.width,e.height,r).then((e=>{self.postMessage({usedTime:Date.now()-n,buffer:e.buffer,size:e.length},[e.buffer]),setDeadTimer(15e3)}))},status(){self.postMessage(isWorking)}};async function compress(e,r,n,t=75){try{return zpicIns||(zpicIns=await promise),zpicIns.encode(e,r,n,{quality:t,baseline:!1,arithmetic:!1,progressive:!0,optimize_coding:!0,smoothing:0,color_space:3,quant_table:3,trellis_multipass:!1,trellis_opt_zero:!1,trellis_opt_table:!1,trellis_loops:1,auto_subsample:!0,chroma_subsample:2,separate_chroma_quality:!1,chroma_quality:75})}catch(e){self.postMessage({type:"error",data:e.message})}}self.addEventListener("message",(({data:e})=>{workerJobMap[e.type](e)}));